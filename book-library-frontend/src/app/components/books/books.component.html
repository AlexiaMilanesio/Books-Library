<div class="general-container">
  <div class="search-engine-container" *ngIf="books">
    <button
      (click)="goToLibraries()"
      class="show-libraries-btn"
      mat-raised-button
      color="primary"
    >
      Show libraries
    </button>

    <h2 *ngIf="libraryId">Books of library id: {{ libraryId }}</h2>
    <h2 *ngIf="bookId">Books with isbn: {{ bookId }}</h2>
    <h2 *ngIf="bookTitle">Books with title: {{ bookTitle }}</h2>
    <h2 *ngIf="bookAuthor">Books of author: {{ bookAuthor }}</h2>

    <mat-form-field>
      <mat-label>Choose an order</mat-label>
      <mat-select
        [formControl]="selectedOrder"
        (ngModelChange)="orderChange()"
      >
        <mat-option value="">Default</mat-option>
        <mat-option value="titleOrder">Order books by title</mat-option>
        <mat-option value="yearOrder">Order books by year</mat-option>
      </mat-select>
    </mat-form-field>
  </div>


  <table
    mat-table
    [dataSource]="books"
    *ngIf="!errorMessage && books"
    class="mat-elevation-z8"
  >
    <ng-container
      [matColumnDef]="column"
      *ngFor="let column of displayedColumns"
    >
      <th mat-header-cell *matHeaderCellDef class="col-title">
        {{ column === "Delete" || column === "Edit" ? "" : column }}
      </th>
      <td mat-cell *matCellDef="let element" class="{{ column }}">
        {{ element[column] }}
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr
      mat-row
      *matRowDef="let row; columns: displayedColumns"
      (click)="goToEditMode(row)"
    ></tr>
  </table>


  <div class="paginator" *ngIf="!errorMessage && books">
    <button (click)="getFirstPage()"><<</button>
    <button (click)="getPreviousPage()"><</button>

    <p>Total records: {{ totalRecords }}</p>
    <p>Page: {{ pageNumber }} of {{ totalPages }}</p>

    <mat-form-field>
      <mat-label>Page size</mat-label>
      <mat-select
        [formControl]="selectedPagination"
        (ngModelChange)="pageSizeChange()"
      >
        <mat-option value="10">10</mat-option>
        <mat-option value="25">25</mat-option>
        <mat-option value="50">50</mat-option>
        <mat-option value="100">100</mat-option>
      </mat-select>
    </mat-form-field>

    <button (click)="getNextPage()">></button>
    <button (click)="getLastPage()">>></button>
  </div>

  <p *ngIf="errorMessage" class="message">{{ errorMessage }}</p>
</div>
